Git 技术分享 -- 演说结构

- Git 基础
  - 版本管理的历史：
    - 用（时间戳作为名称的）文件夹来保存每时每刻状态
    - 由软件系统内部维护的数据库保存每一次增量（检出时将增量相加）（举例：Subversion)
    - 由软件系统内部维护的数据库保存每一次快照（检出时将 WD 同步为指定快照即可）(举例：git)
  - 版本管理系统的基本原理：
    - 保存每一次变更
    - 保存每一次快照
      - 压缩算法
      - Copy on Write
  - 版本管理系统功能：
    - 保存变更
    - 对任一文件，检出过往提交了的任一个历史版本（用于恢复、回退等）
    - 比较两个不同的版本之间的差异
    - 方便多人协同开发
  - 数据在哪儿存储：
    - 本地式的 (举例：GNU RCS)
    - 中心式的 (举例：Subversion)
    - 分布式的 (举例：git)
      - 分布式的好处
        - 每个节点都有完整的数据
        - 整个系统不会因为中心节点的失效而失效
  - Why Git?
    - 便利的分支管理
      - 分支的创建、合并、删除很方便
      - 冲突解决能够方便的通过编辑器与 Git 的集成实现
    - 分布式的
    - 细粒度的操作方式（针对单个文件或者整个当前文件夹）
    - 编辑器友好（很多编辑器内嵌了支持，举例：VS Code, IntelliJ IDEA）
    - 生态好（编辑器支持很多都是内嵌的，插件，代码托管平台……）
    - Git 可以很简单（只用几个基本命令：git-add, git-commit, git-push, git-log, git-status 等）
    - 方便地给提交写注释
    - 方便地给版本打标签
    - 方便地观察提交引入的变动
    - 方便地找出是哪一次提交引入错误
  - Git 的三个存储区域（以及文件的「状态」）
    - 三个存储区域
      - Working Directory （简称 WD，也就是工作目录）
      - Staging Area (暂存区，有时候也叫 Index, 将文件放到这个地方表示你希望将该文件提交)
      - Repository （代码仓库，有时候也会指 HEAD 指针指向的分支执行的提交指向的树）
    - 文件的状态：
      - 未跟踪（Untrack，表示文件不在 WD, Index, HEAD 以及 HEAD 可达的任何树中）
      - 已暂存，待提交（表示文件在暂存区，下一次 git-commit 该文件就会出现在版本历史中）
      - 位于代码仓库（在提交历史中，也叫位于 HEAD）
      - 已修改，未暂存（在 WD 中的文件的版本比暂存区的新）
  - Git 存储数据采用的数据结构（树、指针与符号）
    - 基础对象
      - blob （文件）
      - tree （树，或者文件夹）
      - commit （提交）
      - tag （标签，普通标签指向 commit，-a 标签指向标签对象）
    - 符号
      - HEAD
    - Refs （引用，可能指向一个提交、一棵树或者一个文件，可用 git-rev-parse 命令查看指向哪儿)
      - refs/tags
      - refs/heads
      - sha1
      - HEAD^{tree}
      - HEAD^
      - HEAD^^
      - HEAD^^^
      - HEAD~
      - HEAD~n
      - HEAD^{commit}
      - HEAD@{n}
      - HEAD:path/to/tree/or/blob
- Git 应用
  - 查看
    - git-log （记录代码变更）
    - git-show （查看单次 commit 的变更）
    - git-diff （从源 ref 到目的 ref 的变更，如果不带参数，则是 WD 相对 staging area 的变更）
    - git-status （当前状态，查看哪些文件是在 staging area）
    - git-tag （标签管理）
  - 恢复与保存
    - 恢复
      - git-revert （应用一个给的提交产生的变更的逆在当前的 HEAD 上，并且拿结果创建一个新提交）
      - git-checkout （切换 HEAD 到一个给定 Ref 上，并使 staging area 和 WD 同步）
      - git-reset （使 HEAD 指向的分支指向一个新的地址）
      - git-restore （恢复 WD 为 staging area, 或者恢复 staging area 为 HEAD）
      - git-stash （保存当前工作状态，但是不创建一个新的提交）
    - 保存
      - git-add （将文件添加到 staging area）
      - git-commit （从 staging area 创建一颗树，并且创建一个新的提交指向这棵树，并且使 HEAD 分支指向这个新提交）
  - 代码合并操作
    - git-cherry-pick （应用一个或多个 commit 的变更到当前的 HEAD 上并创建一个新 commit）
    - git-merge （合并代码）
    - git-rebase （将当前分支自分叉点以来引入的提交在另一个 base 上重演一遍）
  - 错误定位
    - git-bisect （二分法）
  - 编辑器中的 Git 插件
    - VS Code 插件 Git Graph
